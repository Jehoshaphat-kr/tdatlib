<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>LABWONS :: 시장 지도</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <link rel="icon" type="image/x-icon" href="./favicon.ico">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="./aos.css" rel="stylesheet">
  <link href="./bootstrap.min.css" rel="stylesheet">
  <link href="./bootstrap-icons.css" rel="stylesheet">
  <link href="./glightbox.min.css" rel="stylesheet">
  <link href="./remixicon.css" rel="stylesheet">
  <link href="./swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="../style.css" rel="stylesheet">

  <!-- Template Market Map -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <!-- =======================================================
  * Template Name: SNOB
  * Author: Je Hyeuk LEE
  * Contact: tdat.tistory@gmail.com
  * License: MIT
  ======================================================== -->
  <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.16.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/Jehoshaphat-kr/tdatlib/tdatlib/market/archive/common/suffix.js"></script>
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a href="https://labwons.com/" class="logo d-flex align-items-center">
        <img src="./logo.png" alt="">
        <span>LAB<strong>￦</strong>ONS</span>
      </a>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link active" href="https://labwons.com/">홈</a></li>
          <li class="dropdown"><a href="#"><span>시장 보기</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="#">시장 지도</a></li>
              <li><a href="#">버블 차트</a></li>
              <li><a href="#">업종별 등락률</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="https://labwons.com/category/%EA%B8%B0%EC%88%A0%20%EB%B6%84%EC%84%9D/"><span>기술 분석</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="https://labwons.com/category/%ED%88%AC%EC%9E%90%20%EC%A7%80%ED%91%9C/">투자 지표</a></li>
              <li><a href="https://labwons.com/category/%EB%B0%B1%20%ED%85%8C%EC%8A%A4%ED%8A%B8/">백 테스트</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="https://labwons.com/category/%EA%B8%B0%EB%B3%B8%20%EB%B6%84%EC%84%9D/"><span>기본 분석</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="https://labwons.com/category/%EC%82%B0%EC%97%85%20%EB%B6%84%EC%84%9D/">산업 분석</a></li>
              <li><a href="https://labwons.com/category/%EA%B8%B0%EC%97%85%20%EC%A1%B0%EC%82%AC/">기업 조사</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="https://labwons.com/category/%EA%B8%B0%EB%B3%B8%20%EB%B6%84%EC%84%9D/"><span>투자 노트</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="https://labwons.com/category/%EA%B2%BD%EC%A0%9C%20%EC%97%AD%EC%82%AC/">경제 역사</a></li>
              <li><a href="https://labwons.com/category/%EC%8B%A4%EC%A0%84%20%ED%88%AC%EC%9E%90/">실전 투자</a></li>
              <li><a href="https://labwons.com/category/%EA%B0%80%EC%9D%B4%EB%93%9C/">가이드</a></li>
            </ul>
          </li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav>
    </div>
  </header>
  <!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
      <div class="container">
        <ol>
          <li><a href="https://labwons.com/">홈</a></li>
          <li><a href="#">시장 보기</a></li>
          <li>시장 지도</li>
        </ol>
        <h2 style="display:inline-block !important;">시장 지도</h2><span id="market-date"> (Loading...)</span>

      </div>
    </section><!-- End Breadcrumbs -->

    <!-- ======= Blog Single Section ======= -->
    <section id="market-map">
      <div class="map-ads">
        <div class="map-ads-content">광고 영역(자동 높이)</div>
      </div>
        <div class="map-nav">
          <div class="map-nav-1">
            <div class="map-nav-mobi">
              <select class="map-select" name="">
                <optgroup label="WICS">
                  <option value="indful" selected="selected">WICS 대형주</option>
                  <option value="indksm">WICS 중형주</option>
                </optgroup>
                <optgroup label="WI26">
                  <option value="secful">WI26 대형주</option>
                  <option value="secksm">WI26 중형주</option>
                </optgroup>
                <optgroup label="ETF">
                  <option value="etfful">ETF</option>
                </optgroup>
              </select>
              <select class="option-select" name="지표">
                <option value="R1D">1일 수익률</option>
                <option value="R1W">1주 수익률</option>
                <option value="R1M">1개월 수익률</option>
                <option value="R3M">3개월 수익률</option>
                <option value="R6M">6개월 수익률</option>
                <option value="R1Y">1년 수익률</option>
                <option value="PER">PER</option>
                <option value="PBR">PBR</option>
                <option value="DIV">배당 수익률</option>
              </select>
            </div>
            <input id="map-reset" class="map-reset" type="button" value="&nbsp;" />
          </div>
          <div class="map-nav-2">
            <select class="map-search">
              <option></option>
            </select>
          </div>
          <div style="clear: both;"></div>
        </div>

        <div id="myMap">&nbsp;</div>
        <div class="map-guide">
          <div class="map-guide-bar">
            <div id="s_red" class="map-color-unit">하락</div>
            <div id="m_red" class="map-color-unit">&nbsp;</div>
            <div id="l_red" class="map-color-unit">&nbsp;</div>
            <div id="navy" class="map-color-unit">보합</div>
            <div id="l_grn" class="map-color-unit">&nbsp;</div>
            <div id="m_grn" class="map-color-unit">&nbsp;</div>
            <div id="s_grn" class="map-color-unit">상승</div>
          </div>
          <div class="map-notice">본 자료는 투자 참고용입니다. 색상은 상대 지표로 표현하였습니다. PC에서 지도에 커서를 올리거나 모바일에서 꾸욱 누르면 정보가 나타납니다(일부 기기 제외). 해당 종목이나 분류를 클릭하면 확대/재편됩니다. *표시는 코스닥 종목입니다. 종목 구성이 많을수록 속도가 느려질 수 있습니다. 일부 지도에서는 가독성을 위해 소형주는 제외되었습니다.</div>
        </div>
      </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">

    <div class="footer-top">
      <div class="container">
        <div class="row gy-4">
          <div class="col-lg-5 col-md-12 footer-info">
            <a href="index.html" class="logo d-flex align-items-center">
              <img src="./logo.png" alt="">
              <span>LAB<strong>￦</strong>ONS</span>
            </a>
            <p>티스토리(Tistory) 플랫폼에 기반한 <b>개인 블로그</b>이며 본 사이트에서 취득한 어떤 정보도 법적인 효력을 갖지 못합니다. 모든 투자의 책임은 투자자 본인에게 있습니다.
            참고한 정보의 출처는 신뢰할 만하나, 열람 시점이나 제공처의 사정 따라 정보의 정확성이 달라질 수 있습니다.</p>
            <div class="social-links mt-3">
              <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
              <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
              <a href="#" class="instagram"><i class="bi bi-instagram bx bxl-instagram"></i></a>
              <a href="#" class="linkedin"><i class="bi bi-linkedin bx bxl-linkedin"></i></a>
            </div>
          </div>

          <div class="col-lg-2 col-6 footer-links">
            <h4>주요 정보 출처</h4>
            <ul>
              <li><i class="bi bi-chevron-right"></i> <a href="http://data.krx.co.kr/contents/MDC/MAIN/main/index.cmd">한국거래소</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://dart.fss.or.kr/">전자공시시스템</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://finance.naver.com/">네이버증권</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://comp.fnguide.com/SVO2/ASP/SVD_main.asp?pGB=1&gicode=A005930&cID=&MenuYn=Y&ReportGB=&NewMenuID=11&stkGb=&strResearchYN=">에프앤가이드</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="https://news.einfomax.co.kr/">연합인포맥스</a></li>
            </ul>
          </div>

          <div class="col-lg-2 col-6 footer-links">
            <h4>주요 서비스</h4>
            <ul>
              <li><i class="bi bi-chevron-right"></i> <a href="#">시장 지도</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#">버블 지도</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#">산업 차트</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#">기업 분석</a></li>
              <li><i class="bi bi-chevron-right"></i> <a href="#">투자 역사</a></li>
            </ul>
          </div>

          <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
            <h4>Contact</h4>
            <p>
              <strong>Email:</strong> tdat.tistory@gmail.com <br>
              <strong>Open Kakao:</strong> 준비 중 <br>
            </p>

          </div>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>SnoB</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Designed by SnoB
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="./aos.js"></script>
  <script src="./bootstrap.bundle.min.js"></script>
  <script src="./glightbox.min.js"></script>
  <script src="./isotope.pkgd.min.js"></script>
  <script src="./swiper-bundle.min.js"></script>

  <!-- Template Main JS File -->
  <script src="./main.js"></script>
  <script type="text/javascript" id="marketdata"></script>
  <script type="text/javascript">
    const static_log = "https://raw.githubusercontent.com/Jehoshaphat-kr/tdatlib/master/tdatlib/market/archive/deploy/marketdatav.txt"
    const static_url = "https://raw.githubusercontent.com/Jehoshaphat-kr/tdatlib/master/tdatlib/market/archive/deploy/marketdata.js"
    fetch(static_url, {method: 'GET'})
      .then((response) => response.text())
      .then(data => {
        $("#marketdata").html(data);
        $('#market-date').html(trading_date);
        $('.map-select').prop('selectedIndex',0);
        $('.option-select').prop('selectedIndex',0);
        $('.map-search').select2({placeholder:"종목명 검색..", allowClear: true});
        market_type = $('.map-select').val();
        option_type = $('.option-select').val();
        map_key = market_type;
        treemap(map_key);
        setSearch(map_key);
      })

    $(document).ready(function(){
      // MAP type selection
      $('.map-select').on('change', function(){
        $('.option-select option[value="PER"]').remove();
        $('.option-select option[value="PBR"]').remove();
        $('.option-select option[value="DIV"]').remove();
        map_type = $('.map-select').val()

        if (map_type != 'etfful'){
          $('.option-select').append('<option value="PER">PER</option>');
          $('.option-select').append('<option value="PBR">PBR</option>');
          $('.option-select').append('<option value="DIV">배당수익률</option>');
        }

        map_key = map_type;
        treemap(map_key);
        setSearch(map_key);
      })

      // Option selection
      $(".option-select").on('change', function(){
        option_type = $(".option-select").val();
        treemap(map_key);
      if ((option_type == 'PER') || (option_type == 'PBR')){
        $("#s_red").html('고평가');
        $("#navy").html('평균');
        $("#s_grn").html('저평가');
      } else if (option_type == 'DIV'){
        $("#s_red").html('저배당');
        $("#navy").html('평균');
        $("#s_grn").html('고배당');
      } else {
        $("#s_red").html('하락');
        $("#navy").html('보합');
        $("#s_grn").html('상승');
      }
      })

      // MAP Search
      $('.map-search').on('select2:select', function (e) {
        var username = e.params.data.text;
        if (username == "") { return }

        var i_start = username.indexOf('[');
        if (i_start != -1){
          var group = username.slice(i_start + 1, username.length - 1);
          username = username.slice(0, i_start);
        } else if (group_data.includes(username)) {
          var group = username;
        } else{
          var idx = tdat_name.indexOf(username);
          var group = tdat_covers[map_key][idx];
        }

        search_top(group);
        if (username == group){return}
        setTimeout(function(){
          search_asset(username);
        }, 1000)
      });

      // MAP Reset
      $('#map-reset').click(function(){
        treemap(map_key);
      })
    })
  </script>

</body>

</html>
